<div class="test-harness">
  <header class="harness-header">
    <h1>Form Builder Test Harness</h1>
    <p class="subtitle">Create and test dynamic forms with custom styling</p>
  </header>

  <!-- View Switcher -->
  <nav class="view-switcher">
    <button
      class="view-tab"
      [class.active]="currentView() === 'builder'"
      (click)="switchView('builder')">
      Form Builder
    </button>
    <button
      class="view-tab"
      [class.active]="currentView() === 'preview'"
      (click)="switchView('preview')"
      [disabled]="!currentConfig() || currentConfig()!.fields.length === 0">
      Preview & Test
    </button>
    <button
      class="view-tab"
      [class.active]="currentView() === 'docs'"
      (click)="switchView('docs')">
      Documentation
    </button>
    <button
      class="view-tab"
      [class.active]="currentView() === 'changelog'"
      (click)="switchView('changelog')">
      Changelog
    </button>
    <button
      class="view-tab"
      [class.active]="currentView() === 'theme'"
      (click)="switchView('theme')">
      Theme CSS
    </button>
  </nav>

  @if (shareNotification()) {
    <div class="share-notification">{{ shareNotification() }}</div>
  }

  <!-- Builder View -->
  @if (currentView() === 'builder') {
    <div class="view-content">
      <div class="info-banner">
        <h3>Welcome to the Form Builder!</h3>
        <p>Create custom forms visually, save them to local storage, and test with different style themes.</p>
        <ul>
          <li>Add fields and configure validations</li>
          <li>Save and load form configurations</li>
          <li>Export/import as JSON</li>
          <li>Preview with different styling themes</li>
        </ul>
      </div>

      <ngx-form-builder
        [(config)]="currentConfig"
        (shareRequested)="shareForm()" />
    </div>
  }

  <!-- Preview View -->
  @if (currentView() === 'preview' && currentConfig()) {
    <div class="view-content preview-view">
      @if (submissionResult()) {
        <div class="submission-result">
          <h4>Submission Result</h4>
          <pre>{{ submissionResult() }}</pre>
        </div>
      }

      <!-- Form Preview -->
      <div class="form-preview">
        <h3>Form Preview - {{ currentConfig()!.id }}</h3>
        <p class="preview-note">
          This form uses a headless component styled with data-* attributes.
        </p>

        <ngx-dynamic-form
          #dynamicForm
          [config]="currentConfig()!"
          (formSubmit)="onFormSubmit($event)"
          (formSave)="onFormSave($event)"
          (validationErrors)="onValidationErrors($event)">
          <!-- Custom buttons rendered by consuming application -->
          <div data-form-actions>
            @if (currentConfig()!.saveLabel) {
              <button
                type="button"
                data-action="save"
                (click)="dynamicForm.saveForm()">
                {{ currentConfig()!.saveLabel }}
              </button>
            }
            <button
              type="button"
              data-action="submit"
              [attr.data-can-submit]="dynamicForm.valid"
              (click)="dynamicForm.submitForm()">
              {{ currentConfig()!.submitLabel || 'Submit' }}
            </button>
          </div>
        </ngx-dynamic-form>
      </div>

      <!-- Data Attributes Info -->
      <div class="info-panel">
        <h3>About Data Attributes</h3>
        <p>The form component uses data-* attributes for state management, allowing complete styling flexibility:</p>
        <ul class="data-attributes-list">
          <li><code>data-form-valid</code> - Form validation state (true/false)</li>
          <li><code>data-form-touched</code> - Whether form has been interacted with</li>
          <li><code>data-field-name</code> - Field identifier</li>
          <li><code>data-field-type</code> - Field type (text, email, etc.)</li>
          <li><code>data-field-valid</code> - Field validation state</li>
          <li><code>data-field-touched</code> - Field interaction state</li>
          <li><code>data-field-required</code> - Whether field is required</li>
          <li><code>data-validation-error</code> - Error message container</li>
        </ul>
      </div>
    </div>
  }

  <!-- Documentation View -->
  @if (currentView() === 'docs') {
    <div class="view-content docs-view">
      <article class="documentation">
        @if (docsLoading()) {
          <p>Loading documentation...</p>
        } @else if (docsHtml()) {
          <div [innerHTML]="docsHtml()"></div>
        } @else {
          <p>Documentation not available.</p>
        }
      </article>
    </div>
  }

  <!-- Changelog View -->
  @if (currentView() === 'changelog') {
    <div class="view-content changelog-view">
      <article class="changelog">
        <h2>Changelog</h2>

        <section class="version">
          <h3>v0.3.0 <span class="date">(2026-01-07)</span></h3>
          <h4>New Features</h4>
          <ul>
            <li>Added async/API validation support for form fields</li>
            <li>Added <code>asyncValidation</code> config option with validator function, trigger, and debounce</li>
            <li>Added <code>validating</code> getter to check if async validation is in progress</li>
            <li>Added <code>setErrors()</code> method to set external validation errors from API responses</li>
            <li>Added <code>clearErrors()</code> and <code>clearFieldError()</code> methods</li>
            <li>Added <code>validateAllAsync()</code> method to run all async validations</li>
            <li>Added <code>data-form-validating</code> and <code>data-field-validating</code> attributes</li>
          </ul>
        </section>

        <section class="version">
          <h3>v0.2.0 <span class="date">(2026-01-07)</span></h3>
          <h4>Breaking Changes</h4>
          <ul>
            <li>Removed built-in submit/save buttons from DynamicForm component</li>
            <li>Consuming applications must now render their own buttons via content projection</li>
          </ul>
          <h4>New Features</h4>
          <ul>
            <li>Added <code>value</code> getter for accessing current form values</li>
            <li>Added <code>valid</code>, <code>touched</code>, <code>dirty</code> getters for form state</li>
            <li>Added <code>valueChanges</code> output that emits on every form value change</li>
            <li>Added content projection support for custom buttons/actions</li>
          </ul>
        </section>

        <section class="version">
          <h3>v0.1.2 <span class="date">(2026-01-07)</span></h3>
          <ul>
            <li>Updated README with comprehensive usage documentation</li>
            <li>Added MIT license file</li>
          </ul>
        </section>

        <section class="version">
          <h3>v0.1.1 <span class="date">(2026-01-07)</span></h3>
          <ul>
            <li>Fixed package scope to &#64;moe1399/ngx-dynamic-forms</li>
          </ul>
        </section>

        <section class="version">
          <h3>v0.1.0 <span class="date">(2026-01-07)</span></h3>
          <h4>Initial Release</h4>
          <ul>
            <li>DynamicForm component - headless form renderer</li>
            <li>NgxFormBuilder component - visual form builder</li>
            <li>14 field types: text, email, number, textarea, date, daterange, select, radio, checkbox, table, datagrid, phone, info, formref</li>
            <li>FormBuilderService for configuration management</li>
            <li>FormStorage service for form data persistence</li>
            <li>UrlSchemaService for URL-based form sharing</li>
            <li>Default theme with data-attribute based styling</li>
          </ul>
        </section>
      </article>
    </div>
  }

  <!-- Theme CSS View -->
  @if (currentView() === 'theme') {
    <div class="view-content theme-view">
      <article class="theme-content">
        <h2>Default Theme CSS</h2>
        <p class="lead">Copy this CSS to your project's stylesheet to style the dynamic form component.</p>

        <div class="theme-actions">
          <button type="button" class="copy-btn" (click)="copyThemeCss()">
            @if (themeCopied()) {
              &#10003; Copied!
            } @else {
              Copy CSS
            }
          </button>
          <span class="theme-note">The form uses data-* attributes for styling, giving you complete styling freedom.</span>
        </div>

        <pre><code id="theme-css-content">/**
 * Default Theme for Dynamic Form
 * Government/official form style with purple headers and lavender rows
 * Uses data-* attributes for styling
 */

/* ========================================
   Form Container
   ======================================== */
form[data-form-id] &#123;
  max-width: 800px;
  margin: 0 auto;
  background: #ffffff;
  border: 1px solid #ccc;
  font-family: Arial, sans-serif;
  font-size: 14px;
&#125;

/* Validating state - shows loading overlay */
form[data-form-validating="true"] &#123;
  position: relative;
  pointer-events: none;
&#125;

form[data-form-validating="true"]::after &#123;
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.5);
  z-index: 100;
&#125;

/* Fields Section */
[data-form-section="fields"] &#123;
  margin: 0;
&#125;

/* ========================================
   Section Container & Headers
   ======================================== */
[data-section-id] &#123;
  margin: 0;
&#125;

/* Section Headers - Purple background */
[data-section-header] &#123;
  background: #512B58;
  color: #ffffff;
  padding: 8px 12px;
  font-weight: bold;
  font-size: 14px;
  margin: 0;
  border-bottom: 1px solid #ccc;
&#125;

/* Remove header border when followed by description */
[data-section-header] + [data-section-description] &#123;
  margin-top: -1px;
&#125;

/* Section Description - Purple background, smaller text */
[data-section-description] &#123;
  background: #512B58;
  color: #ffffff;
  padding: 6px 12px 10px 12px;
  font-size: 13px;
  font-weight: normal;
  line-height: 1.4;
  margin: 0;
  border-bottom: 1px solid #ccc;
&#125;

/* ========================================
   Field Row - Container for fields
   ======================================== */
[data-field-row] &#123;
  display: flex;
  flex-wrap: nowrap;
  border-bottom: 1px solid #ccc;
&#125;

[data-field-row]:last-child &#123;
  border-bottom: none;
&#125;

/* Inline Group - Multiple fields in a row */
[data-field-row][data-inline-group] [data-field-name] &#123;
  border-bottom: none;
  border-right: 1px solid #ccc;
&#125;

[data-field-row][data-inline-group] [data-field-name]:last-child &#123;
  border-right: none;
&#125;

/* Field width proportions for inline groups */
[data-field-row][data-inline-group] [data-field-width="1"] &#123;
  flex: 1;
&#125;

[data-field-row][data-inline-group] [data-field-width="2"] &#123;
  flex: 2;
&#125;

[data-field-row][data-inline-group] [data-field-width="3"] &#123;
  flex: 3;
&#125;

[data-field-row][data-inline-group] [data-field-width="4"] &#123;
  flex: 4;
&#125;

/* ========================================
   Individual Field - Table row style
   ======================================== */
[data-field-name] &#123;
  display: flex;
  flex-wrap: wrap;
  flex: 1;
  align-items: stretch;
  background: #E8E0ED;
  margin: 0;
&#125;

/* Field validating state - spinner indicator */
[data-field-validating="true"] &#123;
  position: relative;
&#125;

[data-field-validating="true"]::after &#123;
  content: '';
  position: absolute;
  top: 50%;
  right: 12px;
  width: 16px;
  height: 16px;
  margin-top: -8px;
  border: 2px solid #512B58;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  z-index: 10;
&#125;

&#64;keyframes spin &#123;
  to &#123; transform: rotate(360deg); &#125;
&#125;

/* ========================================
   Labels - Left column style
   ======================================== */
label[data-label-for] &#123;
  display: flex;
  align-items: center;
  min-width: 200px;
  max-width: 200px;
  padding: 10px 12px;
  font-size: 13px;
  font-weight: normal;
  color: #333;
  background: #E8E0ED;
  border-right: 1px solid #ccc;
  margin: 0;
  position: relative;
&#125;

/* Required Indicator */
[data-required-indicator] &#123;
  color: #c00;
  font-size: 14px;
  margin-left: 4px;
&#125;

/* ========================================
   Input Container - Right column style
   ======================================== */
[data-input-container] &#123;
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  padding: 6px 10px;
  background: #ffffff;
&#125;

/* Input Fields */
input[data-input-type],
textarea[data-input-type],
select[data-input-type] &#123;
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #999;
  font-size: 13px;
  font-family: inherit;
  background: #ffffff;
&#125;

input[data-input-type]:focus,
textarea[data-input-type]:focus,
select[data-input-type]:focus &#123;
  outline: none;
  border-color: #512B58;
  box-shadow: 0 0 0 2px rgba(81, 43, 88, 0.15);
&#125;

textarea[data-input-type] &#123;
  min-height: 80px;
  resize: vertical;
&#125;

select[data-input-type] &#123;
  cursor: pointer;
&#125;

/* ========================================
   Invalid Field State
   ======================================== */
[data-field-valid="false"] input:not([data-table-input]),
[data-field-valid="false"] textarea:not([data-table-input]),
[data-field-valid="false"] select:not([data-table-input]) &#123;
  border-color: #c00;
  background: #fff8f8;
&#125;

[data-field-valid="false"] input:not([data-table-input]):focus,
[data-field-valid="false"] textarea:not([data-table-input]):focus,
[data-field-valid="false"] select:not([data-table-input]):focus &#123;
  box-shadow: 0 0 0 2px rgba(204, 0, 0, 0.15);
&#125;

/* Validation Error Messages */
[data-validation-error] &#123;
  color: #c00;
  font-size: 12px;
  padding: 4px 10px;
  background: #fff;
  width: 100%;
&#125;

/* ========================================
   Disabled Fields
   ======================================== */
[data-field-disabled="true"] label &#123;
  color: #888;
&#125;

[data-field-disabled="true"] input,
[data-field-disabled="true"] textarea,
[data-field-disabled="true"] select &#123;
  background: #f5f5f5;
  border-color: #ccc;
  color: #888;
  cursor: not-allowed;
&#125;

/* ========================================
   Actions Section
   ======================================== */
[data-form-section="actions"],
[data-form-actions] &#123;
  display: flex;
  gap: 10px;
  justify-content: flex-start;
  padding: 15px 12px;
  background: #E8E0ED;
  border-top: 1px solid #ccc;
&#125;

/* Buttons */
button[data-action] &#123;
  padding: 8px 20px;
  font-size: 13px;
  font-weight: normal;
  border: 1px solid #999;
  cursor: pointer;
  font-family: inherit;
  background: #f5f5f5;
  color: #333;
&#125;

button[data-action]:hover &#123;
  background: #e8e8e8;
&#125;

button[data-action]:active &#123;
  background: #ddd;
&#125;

button[data-action="save"] &#123;
  background: #f5f5f5;
  color: #333;
&#125;

button[data-action="save"]:hover &#123;
  background: #e8e8e8;
&#125;

button[data-action="submit"] &#123;
  background: #512B58;
  color: #ffffff;
  border-color: #512B58;
&#125;

button[data-action="submit"]:hover &#123;
  background: #3d2042;
&#125;

button[data-action="submit"][data-can-submit="false"] &#123;
  opacity: 0.5;
  cursor: not-allowed;
&#125;

button[data-action="submit"][data-can-submit="false"]:hover &#123;
  background: #512B58;
&#125;

/* Fields without labels - input takes full width */
[data-has-label="false"] [data-input-container] &#123;
  flex: 1;
  width: 100%;
&#125;

/* ========================================
   Single Checkbox (boolean toggle)
   ======================================== */
[data-field-type="checkbox"]:has([data-checkbox-single]) &#123;
  flex-direction: row;
  align-items: center;
&#125;

[data-field-type="checkbox"]:has([data-checkbox-single]) label[data-label-for] &#123;
  flex: none;
  min-width: auto;
  max-width: none;
  border-right: none;
&#125;

[data-checkbox-single] &#123;
  width: auto;
  margin-right: 8px;
&#125;

/* ========================================
   Radio Group
   ======================================== */
[data-radio-group] &#123;
  display: flex;
  flex-direction: column;
  gap: 0;
  width: 100%;
&#125;

[data-radio-option] &#123;
  display: flex;
  align-items: center;
  padding: 10px 12px;
  cursor: pointer;
  border-bottom: 1px solid #ddd;
  background: #fff;
  transition: background 0.15s;
&#125;

[data-radio-option]:last-child &#123;
  border-bottom: none;
&#125;

[data-radio-option]:hover &#123;
  background: #f5f5f5;
&#125;

[data-radio-input] &#123;
  width: 16px;
  height: 16px;
  margin: 0;
  margin-right: 10px;
  cursor: pointer;
  accent-color: #512B58;
&#125;

[data-radio-label] &#123;
  font-size: 13px;
  color: #333;
  flex: 1;
&#125;

/* ========================================
   Checkbox Group (multiple selection)
   ======================================== */
[data-checkbox-group] &#123;
  display: flex;
  flex-direction: column;
  gap: 0;
  width: 100%;
&#125;

[data-checkbox-option] &#123;
  display: flex;
  align-items: center;
  padding: 10px 12px;
  cursor: pointer;
  border-bottom: 1px solid #ddd;
  background: #fff;
  transition: background 0.15s;
&#125;

[data-checkbox-option]:last-child &#123;
  border-bottom: none;
&#125;

[data-checkbox-option]:hover &#123;
  background: #f5f5f5;
&#125;

[data-checkbox-option][data-option-selected="true"] &#123;
  background: #f0ebf2;
&#125;

[data-checkbox-input] &#123;
  width: 16px;
  height: 16px;
  margin: 0;
  margin-right: 10px;
  cursor: pointer;
  accent-color: #512B58;
&#125;

[data-checkbox-label] &#123;
  font-size: 13px;
  color: #333;
  flex: 1;
&#125;

/* Checkbox label markdown styles */
[data-checkbox-label] a &#123;
  color: #512B58;
  text-decoration: underline;
&#125;

[data-checkbox-label] a:hover &#123;
  color: #3d2042;
&#125;

[data-checkbox-label] strong &#123;
  font-weight: bold;
&#125;

[data-checkbox-label] em &#123;
  font-style: italic;
&#125;

/* Radio/Checkbox fields - adjust input container */
[data-field-type="radio"] [data-input-container],
[data-field-type="checkbox"]:has([data-checkbox-group]) [data-input-container] &#123;
  padding: 0;
&#125;

/* ========================================
   Info Icon & Popover
   ======================================== */
[data-info-icon] &#123;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  margin-left: 6px;
  font-size: 14px;
  font-weight: bold;
  color: #512B58;
  cursor: pointer;
  border-radius: 50%;
  transition: background 0.15s;
&#125;

[data-info-icon]:hover &#123;
  background: rgba(81, 43, 88, 0.1);
&#125;

[data-info-icon][data-popover-open="true"] &#123;
  background: #512B58;
  color: #fff;
&#125;

/* Popover */
[data-popover] &#123;
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 100;
  display: flex;
  align-items: flex-start;
  gap: 8px;
  min-width: 200px;
  max-width: 300px;
  padding: 10px 12px;
  margin-top: 4px;
  background: #fff;
  border: 1px solid #ccc;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  font-size: 12px;
  font-weight: normal;
  line-height: 1.4;
  color: #333;
&#125;

[data-popover-content] &#123;
  flex: 1;
&#125;

[data-popover-close] &#123;
  flex-shrink: 0;
  padding: 0;
  width: 18px;
  height: 18px;
  background: none;
  border: none;
  font-size: 16px;
  line-height: 1;
  color: #666;
  cursor: pointer;
&#125;

[data-popover-close]:hover &#123;
  color: #333;
&#125;

/* ========================================
   Phone Field
   ======================================== */
[data-phone-container] &#123;
  display: flex;
  gap: 8px;
  width: 100%;
  align-items: stretch;
&#125;

select[data-phone-country-code] &#123;
  width: auto !important;
  min-width: 180px;
  max-width: 220px;
  padding: 6px 8px;
  border: 1px solid #999;
  font-size: 13px;
  font-family: inherit;
  background: #ffffff;
  cursor: pointer;
  flex: 0 0 auto;
&#125;

select[data-phone-country-code]:focus &#123;
  outline: none;
  border-color: #512B58;
  box-shadow: 0 0 0 2px rgba(81, 43, 88, 0.15);
&#125;

input[data-phone-number] &#123;
  width: auto !important;
  flex: 1 1 auto;
  min-width: 0;
  padding: 6px 8px;
  border: 1px solid #999;
  font-size: 13px;
  font-family: inherit;
  background: #ffffff;
&#125;

input[data-phone-number]:focus &#123;
  outline: none;
  border-color: #512B58;
  box-shadow: 0 0 0 2px rgba(81, 43, 88, 0.15);
&#125;

/* Invalid phone field state */
[data-phone-valid="false"] [data-phone-number] &#123;
  border-color: #c00;
  background: #fff8f8;
&#125;

[data-phone-valid="false"] [data-phone-number]:focus &#123;
  box-shadow: 0 0 0 2px rgba(204, 0, 0, 0.15);
&#125;

/* Phone field disabled state */
[data-field-disabled="true"] select[data-phone-country-code],
[data-field-disabled="true"] input[data-phone-number] &#123;
  background: #f5f5f5;
  border-color: #ccc;
  color: #888;
  cursor: not-allowed;
&#125;

/* ========================================
   Date Range Field
   ======================================== */
[data-daterange-container] &#123;
  display: flex;
  gap: 8px;
  width: 100%;
  align-items: center;
&#125;

[data-daterange-field] &#123;
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
&#125;

[data-daterange-label] &#123;
  font-size: 11px;
  color: #666;
  margin-bottom: 4px;
  font-weight: normal;
&#125;

input[data-daterange-input] &#123;
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #999;
  font-size: 13px;
  font-family: inherit;
  background: #ffffff;
&#125;

input[data-daterange-input]:focus &#123;
  outline: none;
  border-color: #512B58;
  box-shadow: 0 0 0 2px rgba(81, 43, 88, 0.15);
&#125;

[data-daterange-separator] &#123;
  padding: 0 4px;
  font-size: 13px;
  color: #666;
  white-space: nowrap;
  flex-shrink: 0;
&#125;

/* Invalid date range state */
[data-daterange-valid="false"] input[data-daterange-input] &#123;
  border-color: #c00;
  background: #fff8f8;
&#125;

[data-daterange-valid="false"] input[data-daterange-input]:focus &#123;
  box-shadow: 0 0 0 2px rgba(204, 0, 0, 0.15);
&#125;

/* Date range disabled state */
[data-field-disabled="true"] input[data-daterange-input] &#123;
  background: #f5f5f5;
  border-color: #ccc;
  color: #888;
  cursor: not-allowed;
&#125;

/* ========================================
   Info Block (Markdown Content)
   ======================================== */
[data-info-block] &#123;
  flex: 1;
  background: #E8E0ED;
  border-bottom: 1px solid #ccc;
&#125;

[data-info-content] &#123;
  padding: 12px 16px;
  font-size: 13px;
  line-height: 1.5;
  color: #333;
&#125;

/* Info block markdown styles */
[data-info-content] strong &#123;
  color: #512B58;
  font-weight: bold;
&#125;

[data-info-content] em &#123;
  font-style: italic;
&#125;

[data-info-content] a &#123;
  color: #512B58;
  text-decoration: underline;
&#125;

[data-info-content] a:hover &#123;
  color: #3d2042;
&#125;

/* ========================================
   Form Reference (formref) Field
   ======================================== */
[data-field-type="formref"] &#123;
  display: block;
  background: transparent;
&#125;

[data-field-type="formref"] label[data-label-for] &#123;
  display: block;
  background: #512B58;
  color: #ffffff;
  font-weight: bold;
  padding: 8px 12px;
  border-right: none;
  border-bottom: 1px solid #ccc;
  min-width: 100%;
  max-width: 100%;
&#125;

[data-field-type="formref"] [data-input-container] &#123;
  padding: 0;
  background: transparent;
&#125;

/* Formref Container */
[data-formref-container] &#123;
  width: 100%;
  border: 1px solid #ccc;
  border-top: none;
&#125;

/* Formref Section Headers */
[data-formref-section-header] &#123;
  background: #6b3d73;
  color: #ffffff;
  padding: 8px 12px;
  font-weight: bold;
  font-size: 13px;
  margin: 0;
  border-bottom: 1px solid #ccc;
&#125;

[data-formref-section-description] &#123;
  background: #6b3d73;
  color: #ffffff;
  padding: 6px 12px 10px 12px;
  font-size: 12px;
  font-weight: normal;
  line-height: 1.4;
  margin: 0;
  border-bottom: 1px solid #ccc;
&#125;

/* Formref Field */
[data-formref-field] &#123;
  display: flex;
  flex-wrap: wrap;
  background: #E8E0ED;
  border-bottom: 1px solid #ccc;
&#125;

[data-formref-field]:last-child &#123;
  border-bottom: none;
&#125;

/* Formref Labels */
[data-formref-label] &#123;
  display: flex;
  align-items: center;
  min-width: 200px;
  max-width: 200px;
  padding: 10px 12px;
  font-size: 13px;
  font-weight: normal;
  color: #333;
  background: #E8E0ED;
  border-right: 1px solid #ccc;
  margin: 0;
&#125;

/* Formref Input Container */
[data-formref-input-container] &#123;
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  padding: 6px 10px;
  background: #ffffff;
&#125;

/* Formref Input Fields */
input[data-formref-input],
textarea[data-formref-input],
select[data-formref-input] &#123;
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #999;
  font-size: 13px;
  font-family: inherit;
  background: #ffffff;
&#125;

input[data-formref-input]:focus,
textarea[data-formref-input]:focus,
select[data-formref-input]:focus &#123;
  outline: none;
  border-color: #512B58;
  box-shadow: 0 0 0 2px rgba(81, 43, 88, 0.15);
&#125;

textarea[data-formref-input] &#123;
  min-height: 80px;
  resize: vertical;
&#125;

/* Invalid Formref Field State */
[data-formref-field][data-field-valid="false"] input[data-formref-input],
[data-formref-field][data-field-valid="false"] textarea[data-formref-input],
[data-formref-field][data-field-valid="false"] select[data-formref-input] &#123;
  border-color: #c00;
  background: #fff8f8;
&#125;

[data-formref-field][data-field-valid="false"] input[data-formref-input]:focus,
[data-formref-field][data-field-valid="false"] textarea[data-formref-input]:focus,
[data-formref-field][data-field-valid="false"] select[data-formref-input]:focus &#123;
  box-shadow: 0 0 0 2px rgba(204, 0, 0, 0.15);
&#125;

/* Formref Error Message */
[data-formref-error] &#123;
  padding: 12px 16px;
  background: #fff8f8;
  color: #c00;
  font-size: 13px;
  border: 1px solid #f5c6cb;
&#125;

/* Formref Radio Group */
[data-formref-radio-group] &#123;
  display: flex;
  flex-direction: column;
  gap: 0;
  width: 100%;
&#125;

[data-formref-radio-option] &#123;
  display: flex;
  align-items: center;
  padding: 10px 12px;
  cursor: pointer;
  border-bottom: 1px solid #ddd;
  background: #fff;
  transition: background 0.15s;
&#125;

[data-formref-radio-option]:last-child &#123;
  border-bottom: none;
&#125;

[data-formref-radio-option]:hover &#123;
  background: #f5f5f5;
&#125;

[data-formref-radio-input] &#123;
  width: 16px;
  height: 16px;
  margin: 0;
  margin-right: 10px;
  cursor: pointer;
  accent-color: #512B58;
&#125;

[data-formref-radio-label] &#123;
  font-size: 13px;
  color: #333;
  flex: 1;
&#125;

/* Formref Checkbox Group */
[data-formref-checkbox-group] &#123;
  display: flex;
  flex-direction: column;
  gap: 0;
  width: 100%;
&#125;

[data-formref-checkbox-option] &#123;
  display: flex;
  align-items: center;
  padding: 10px 12px;
  cursor: pointer;
  border-bottom: 1px solid #ddd;
  background: #fff;
  transition: background 0.15s;
&#125;

[data-formref-checkbox-option]:last-child &#123;
  border-bottom: none;
&#125;

[data-formref-checkbox-option]:hover &#123;
  background: #f5f5f5;
&#125;

[data-formref-checkbox-input] &#123;
  width: 16px;
  height: 16px;
  margin: 0;
  margin-right: 10px;
  cursor: pointer;
  accent-color: #512B58;
&#125;

[data-formref-checkbox-label] &#123;
  font-size: 13px;
  color: #333;
  flex: 1;
&#125;

[data-formref-checkbox-single] &#123;
  width: auto;
  margin-right: 8px;
&#125;

/* ========================================
   Table Field
   ======================================== */
[data-field-type="table"] &#123;
  display: block;
  background: transparent;
&#125;

[data-field-type="table"] label[data-label-for] &#123;
  display: none;
&#125;

[data-field-type="table"] [data-input-container] &#123;
  padding: 0;
  background: transparent;
&#125;

/* Table Container */
[data-table-container] &#123;
  width: 100%;
  overflow-x: auto;
&#125;

/* Table Element */
[data-table] &#123;
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
  table-layout: fixed;
&#125;

/* Table Header */
[data-table-header] &#123;
  background: #E8E0ED;
&#125;

[data-table-header-row] &#123;
  border-bottom: 1px solid #ccc;
&#125;

[data-table-header-cell] &#123;
  padding: 10px 12px;
  text-align: left;
  font-weight: normal;
  color: #333;
  border-right: 1px solid #ccc;
&#125;

[data-table-header-cell]:last-child &#123;
  border-right: none;
&#125;

/* Column width proportions */
[data-table-header-cell][data-column-width="1"] &#123;
  width: 15%;
&#125;

[data-table-header-cell][data-column-width="2"] &#123;
  width: 25%;
&#125;

[data-table-header-cell][data-column-width="3"] &#123;
  width: 35%;
&#125;

[data-table-header-cell][data-column-width="4"] &#123;
  width: 45%;
&#125;

/* Actions column (narrow) */
[data-table-actions-column] &#123;
  width: 50px;
  min-width: 50px;
  text-align: center;
&#125;

/* Table Body */
[data-table-body] &#123;
  background: #ffffff;
&#125;

/* Table Row */
[data-table-row] &#123;
  border-bottom: 1px solid #ccc;
&#125;

[data-table-row]:last-child &#123;
  border-bottom: none;
&#125;

/* Empty row styling (lighter) */
[data-table-row][data-row-empty="true"] &#123;
  background: #fafafa;
&#125;

/* Table Cell */
[data-table-cell] &#123;
  padding: 6px 8px;
  vertical-align: top;
  border-right: 1px solid #ccc;
  position: relative;
&#125;

[data-table-cell]:last-child &#123;
  border-right: none;
&#125;

/* Actions cell (centered) */
[data-table-actions-cell] &#123;
  text-align: center;
  vertical-align: middle;
&#125;

/* Table Inputs */
[data-table-input] &#123;
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #999;
  font-size: 13px;
  font-family: inherit;
  background: #ffffff;
&#125;

[data-table-input]:focus &#123;
  outline: none;
  border-color: #512B58;
  box-shadow: 0 0 0 2px rgba(81, 43, 88, 0.15);
&#125;

/* Invalid cell state */
[data-cell-valid="false"] [data-table-input] &#123;
  border-color: #c00;
  background: #fff8f8;
&#125;

[data-cell-valid="false"] [data-table-input]:focus &#123;
  box-shadow: 0 0 0 2px rgba(204, 0, 0, 0.15);
&#125;

/* Cell Error Tooltip */
[data-cell-error-tooltip] &#123;
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 100;
  min-width: 150px;
  max-width: 250px;
  padding: 6px 10px;
  margin-top: 2px;
  background: #c00;
  color: #fff;
  font-size: 12px;
  line-height: 1.3;
  border-radius: 3px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
&#125;

[data-cell-error-tooltip]::before &#123;
  content: '';
  position: absolute;
  bottom: 100%;
  left: 10px;
  border: 6px solid transparent;
  border-bottom-color: #c00;
&#125;

/* Table Footer (Add row button) */
[data-table-footer] &#123;
  padding: 10px 12px;
  background: #E8E0ED;
  border-top: 1px solid #ccc;
&#125;

/* Table Action Buttons */
button[data-table-action] &#123;
  padding: 6px 12px;
  font-size: 12px;
  font-weight: normal;
  border: 1px solid #999;
  cursor: pointer;
  font-family: inherit;
  background: #f5f5f5;
  color: #333;
&#125;

button[data-table-action]:hover:not(:disabled) &#123;
  background: #e8e8e8;
&#125;

button[data-table-action]:disabled &#123;
  opacity: 0.5;
  cursor: not-allowed;
&#125;

button[data-table-action="add"] &#123;
  background: #512B58;
  color: #ffffff;
  border-color: #512B58;
&#125;

button[data-table-action="add"]:hover:not(:disabled) &#123;
  background: #3d2042;
&#125;

button[data-table-action="remove"] &#123;
  background: #f8d7da;
  color: #721c24;
  border-color: #f5c6cb;
  padding: 4px 8px;
  font-size: 14px;
  line-height: 1;
&#125;

button[data-table-action="remove"]:hover:not(:disabled) &#123;
  background: #f5c6cb;
&#125;

/* ========================================
   DataGrid Field
   ======================================== */
[data-field-type="datagrid"] &#123;
  display: block;
  background: transparent;
&#125;

[data-field-type="datagrid"] label[data-label-for] &#123;
  display: none;
&#125;

[data-field-type="datagrid"] [data-input-container] &#123;
  padding: 0;
  background: transparent;
&#125;

/* DataGrid Container */
[data-datagrid-container] &#123;
  width: 100%;
  overflow-x: auto;
&#125;

/* DataGrid Table */
[data-datagrid] &#123;
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
  table-layout: fixed;
&#125;

/* DataGrid Header - Two-tier with groups */
[data-datagrid-header] &#123;
  background: #E8E0ED;
&#125;

[data-datagrid-header-groups] &#123;
  background: transparent;
&#125;

/* Group row - purple background for group headers */
[data-datagrid-group-row] &#123;
  background: #512B58;
&#125;

[data-datagrid-group-row] [data-datagrid-header-cell] &#123;
  background: #512B58;
  color: #ffffff;
  font-weight: bold;
  text-align: center;
  padding: 8px 12px;
  border-right: 1px solid rgba(255, 255, 255, 0.3);
  border-bottom: 1px solid #ccc;
&#125;

[data-datagrid-group-row] [data-datagrid-header-cell]:last-child &#123;
  border-right: 1px solid #ccc;
&#125;

/* Column group header cells */
[data-datagrid-header-cell][data-column-group] &#123;
  background: #512B58;
  color: #ffffff;
  font-weight: bold;
  border-bottom: 1px solid #ccc;
&#125;

/* Row label header - spans both rows with purple bg */
[data-row-label-header] &#123;
  background: #512B58 !important;
  color: #ffffff !important;
  font-weight: bold;
  text-align: left;
  border-right: 1px solid #ccc;
&#125;

/* Row total header */
[data-row-total-header] &#123;
  background: #512B58 !important;
  color: #ffffff !important;
  font-weight: bold;
  text-align: center;
  border-left: 1px solid #ccc;
&#125;

/* Column row (second tier) */
[data-datagrid-column-row] &#123;
  background: #E8E0ED;
&#125;

[data-datagrid-column-row] [data-datagrid-header-cell] &#123;
  padding: 10px 12px;
  text-align: left;
  font-weight: normal;
  color: #333;
  border-right: 1px solid #ccc;
  border-bottom: 1px solid #ccc;
&#125;

[data-datagrid-column-row] [data-datagrid-header-cell]:last-child &#123;
  border-right: 1px solid #ccc;
&#125;

/* Ungrouped columns (span both rows) */
[data-column-ungrouped] &#123;
  background: #E8E0ED !important;
  color: #333 !important;
  font-weight: normal;
  border-right: 1px solid #ccc;
&#125;

/* Single-tier header row (no groups) */
[data-datagrid-header-row] &#123;
  background: #E8E0ED;
  border-bottom: 1px solid #ccc;
&#125;

[data-datagrid-header-row] [data-datagrid-header-cell] &#123;
  padding: 10px 12px;
  text-align: left;
  font-weight: normal;
  color: #333;
  border-right: 1px solid #ccc;
&#125;

[data-datagrid-header-row] [data-datagrid-header-cell]:last-child &#123;
  border-right: none;
&#125;

/* DataGrid Body */
[data-datagrid-body] &#123;
  background: #ffffff;
&#125;

/* DataGrid Row */
[data-datagrid-row] &#123;
  border-bottom: 1px solid #ccc;
&#125;

[data-datagrid-row]:last-child &#123;
  border-bottom: none;
&#125;

/* Row label cell - lavender background like label column */
[data-row-label-cell] &#123;
  background: #E8E0ED;
  font-weight: normal;
  padding: 10px 12px;
  border-right: 1px solid #ccc;
  color: #333;
&#125;

/* DataGrid Cell */
[data-datagrid-cell] &#123;
  padding: 6px 8px;
  vertical-align: middle;
  border-right: 1px solid #ccc;
&#125;

[data-datagrid-cell]:last-child &#123;
  border-right: none;
&#125;

/* Computed column cells - light grey background */
[data-datagrid-cell][data-column-computed="true"] &#123;
  background: #f9f9f9;
&#125;

/* DataGrid Inputs */
[data-datagrid-input] &#123;
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #999;
  font-size: 13px;
  font-family: inherit;
  background: #ffffff;
&#125;

[data-datagrid-input]:focus &#123;
  outline: none;
  border-color: #512B58;
  box-shadow: 0 0 0 2px rgba(81, 43, 88, 0.15);
&#125;

/* Invalid cell state */
[data-datagrid-cell][data-cell-valid="false"] [data-datagrid-input] &#123;
  border-color: #c00;
  background: #fff8f8;
&#125;

[data-datagrid-cell][data-cell-valid="false"] [data-datagrid-input]:focus &#123;
  box-shadow: 0 0 0 2px rgba(204, 0, 0, 0.15);
&#125;

/* Computed values display */
[data-datagrid-computed-value] &#123;
  display: block;
  padding: 6px 8px;
  font-size: 13px;
  color: #666;
  background: transparent;
  text-align: right;
&#125;

/* Total row styling */
[data-datagrid-row][data-is-total-row="true"] &#123;
  background: #E8E0ED;
  font-weight: bold;
  border-top: 2px solid #512B58;
&#125;

[data-datagrid-row][data-is-total-row="true"] [data-datagrid-cell] &#123;
  background: #E8E0ED;
&#125;

[data-datagrid-row][data-is-total-row="true"] [data-datagrid-computed-value] &#123;
  color: #333;
  font-weight: bold;
&#125;

/* Total label cell */
[data-total-label-cell] &#123;
  font-weight: bold;
&#125;

/* Row total cell styling */
[data-row-total-cell] &#123;
  background: #f5f5f5;
  border-left: 1px solid #ccc;
&#125;

/* Column total cell styling */
[data-column-total-cell] &#123;
  background: #E8E0ED;
&#125;

/* Grand total cell */
[data-grand-total-cell] &#123;
  background: #E8E0ED !important;
  font-weight: bold;
&#125;

[data-grand-total-cell] [data-datagrid-computed-value] &#123;
  font-weight: bold;
  color: #512B58;
&#125;

/* ========================================
   Responsive Styles (Mobile)
   ======================================== */
&#64;media (max-width: 640px) &#123;
  /* Stack inline groups vertically on mobile */
  [data-field-row] &#123;
    flex-direction: column;
  &#125;

  [data-field-row][data-inline-group] [data-field-name] &#123;
    border-right: none;
    border-bottom: 1px solid #ccc;
  &#125;

  [data-field-row][data-inline-group] [data-field-name]:last-child &#123;
    border-bottom: none;
  &#125;

  [data-field-name] &#123;
    flex-direction: column;
  &#125;

  label[data-label-for] &#123;
    min-width: 100%;
    max-width: 100%;
    border-right: none;
    border-bottom: 1px solid #ccc;
    padding: 8px 12px;
  &#125;

  [data-form-section="actions"],
  [data-form-actions] &#123;
    flex-direction: column;
  &#125;

  button[data-action] &#123;
    width: 100%;
  &#125;

  /* Phone field responsive */
  [data-phone-container] &#123;
    flex-direction: column;
    gap: 6px;
  &#125;

  select[data-phone-country-code] &#123;
    width: 100% !important;
    min-width: 100%;
    max-width: 100%;
  &#125;

  input[data-phone-number] &#123;
    width: 100% !important;
  &#125;

  /* Date range responsive */
  [data-daterange-container] &#123;
    flex-direction: column;
    gap: 8px;
    align-items: stretch;
  &#125;

  [data-daterange-field] &#123;
    width: 100%;
  &#125;

  [data-daterange-separator] &#123;
    text-align: center;
    padding: 4px 0;
  &#125;

  /* Formref responsive */
  [data-formref-field] &#123;
    flex-direction: column;
  &#125;

  [data-formref-label] &#123;
    min-width: 100%;
    max-width: 100%;
    border-right: none;
    border-bottom: 1px solid #ccc;
    padding: 8px 12px;
  &#125;

  /* Table responsive - Card layout */
  [data-table-container] &#123;
    overflow-x: visible;
  &#125;

  [data-table] &#123;
    display: block;
    min-width: 0;
  &#125;

  [data-table-header] &#123;
    display: none;
  &#125;

  [data-table-body] &#123;
    display: block;
  &#125;

  /* Each row becomes a card */
  [data-table-row] &#123;
    display: block;
    margin-bottom: 12px;
    padding: 12px;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 4px;
  &#125;

  [data-table-row]:last-child &#123;
    margin-bottom: 0;
  &#125;

  [data-table-row][data-row-empty="true"] &#123;
    background: #fafafa;
  &#125;

  /* Each cell becomes a labeled field */
  [data-table-cell] &#123;
    display: flex;
    flex-direction: column;
    padding: 8px 0;
    border-right: none;
    border-bottom: 1px solid #eee;
  &#125;

  [data-table-cell]:last-child &#123;
    border-bottom: none;
  &#125;

  /* Show column label before input */
  [data-table-cell][data-column-label]::before &#123;
    content: attr(data-column-label);
    display: block;
    margin-bottom: 4px;
    font-size: 12px;
    font-weight: bold;
    color: #666;
  &#125;

  /* Actions cell styling */
  [data-table-actions-cell] &#123;
    flex-direction: row;
    justify-content: flex-end;
    padding-top: 12px;
    border-bottom: none;
  &#125;

  [data-table-actions-cell]::before &#123;
    display: none;
  &#125;

  [data-table-input] &#123;
    width: 100%;
  &#125;

  /* Cell error tooltip positioning for cards */
  [data-cell-error-tooltip] &#123;
    position: relative;
    top: auto;
    left: auto;
    margin-top: 4px;
  &#125;

  [data-cell-error-tooltip]::before &#123;
    display: none;
  &#125;

  [data-table-footer] &#123;
    margin-top: 12px;
  &#125;

  /* DataGrid responsive - Card layout */
  [data-datagrid-container] &#123;
    overflow-x: visible;
  &#125;

  [data-datagrid] &#123;
    display: block;
    min-width: 0;
  &#125;

  [data-datagrid] colgroup &#123;
    display: none;
  &#125;

  [data-datagrid-header] &#123;
    display: none;
  &#125;

  [data-datagrid-body] &#123;
    display: block;
  &#125;

  /* Each row becomes a card */
  [data-datagrid-row] &#123;
    display: block;
    margin-bottom: 12px;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 4px;
    overflow: hidden;
  &#125;

  [data-datagrid-row]:last-child &#123;
    margin-bottom: 0;
  &#125;

  /* Row label cell becomes card header */
  [data-datagrid-row] [data-row-label-cell] &#123;
    display: block;
    background: #512B58;
    color: #fff;
    font-weight: bold;
    padding: 10px 12px;
    border-right: none;
    border-bottom: 1px solid #ccc;
  &#125;

  /* Show row label header before the row label for context */
  [data-datagrid-row] [data-row-label-cell][data-row-label-header]:not([data-row-label-header=""])::before &#123;
    content: attr(data-row-label-header) ": ";
    font-weight: normal;
    opacity: 0.85;
  &#125;

  /* Each data cell becomes a labeled field */
  [data-datagrid-cell] &#123;
    display: flex;
    flex-direction: column;
    padding: 10px 12px;
    border-right: none;
    border-bottom: 1px solid #eee;
  &#125;

  [data-datagrid-cell]:last-child &#123;
    border-bottom: none;
  &#125;

  /* Show column label before input */
  [data-datagrid-cell][data-column-label]::before &#123;
    content: attr(data-column-label);
    display: block;
    margin-bottom: 6px;
    font-size: 12px;
    font-weight: bold;
    color: #666;
  &#125;

  /* Show column group label before column label when present */
  [data-datagrid-cell][data-column-label][data-column-group-label]::before &#123;
    content: attr(data-column-group-label) " - " attr(data-column-label);
  &#125;

  [data-datagrid-input] &#123;
    width: 100%;
  &#125;

  [data-datagrid-computed-value] &#123;
    text-align: left;
    padding: 0;
  &#125;

  [data-datagrid-cell][data-column-computed="true"] &#123;
    background: #f9f9f9;
  &#125;

  [data-row-total-cell] &#123;
    background: #f0f0f0;
    border-left: none;
    font-weight: bold;
  &#125;

  [data-row-total-cell]::before &#123;
    content: attr(data-total-label);
    display: block;
    margin-bottom: 6px;
    font-size: 12px;
    font-weight: bold;
    color: #666;
  &#125;

  /* Total row styling in card mode */
  [data-datagrid-row][data-is-total-row="true"] &#123;
    background: #E8E0ED;
    border-top: none;
  &#125;

  [data-datagrid-row][data-is-total-row="true"] [data-row-label-cell] &#123;
    background: #512B58;
    color: #fff;
  &#125;

  [data-datagrid-row][data-is-total-row="true"] [data-datagrid-cell] &#123;
    background: #E8E0ED;
  &#125;

  /* Grand total cell in card mode */
  [data-grand-total-cell] &#123;
    font-weight: bold;
  &#125;

  [data-grand-total-cell]::before &#123;
    content: 'Grand Total';
    display: block;
    margin-bottom: 6px;
    font-size: 12px;
    font-weight: bold;
    color: #512B58;
  &#125;

  [data-grand-total-cell] [data-datagrid-computed-value] &#123;
    font-size: 15px;
    color: #512B58;
  &#125;
&#125;</code></pre>

        <section class="theme-info">
          <h3>Data Attributes Reference</h3>
          <p>The form component exposes these data attributes for styling:</p>

          <h4>Form Level</h4>
          <ul>
            <li><code>data-form-id</code> - Form identifier</li>
            <li><code>data-form-valid</code> - Form validity (true/false)</li>
            <li><code>data-form-touched</code> - Form touched state</li>
            <li><code>data-form-dirty</code> - Form dirty state</li>
            <li><code>data-form-validating</code> - Async validation in progress</li>
          </ul>

          <h4>Field Level</h4>
          <ul>
            <li><code>data-field-name</code> - Field identifier</li>
            <li><code>data-field-type</code> - Field type (text, email, etc.)</li>
            <li><code>data-field-valid</code> - Field validity</li>
            <li><code>data-field-touched</code> - Field touched state</li>
            <li><code>data-field-dirty</code> - Field dirty state</li>
            <li><code>data-field-disabled</code> - Field disabled state</li>
            <li><code>data-field-required</code> - Field required state</li>
            <li><code>data-field-validating</code> - Field async validation in progress</li>
            <li><code>data-field-width</code> - Field width (1-4)</li>
          </ul>

          <h4>Input Elements</h4>
          <ul>
            <li><code>data-input-type</code> - Input type identifier</li>
            <li><code>data-validation-error</code> - Error message container</li>
            <li><code>data-required-indicator</code> - Required field marker</li>
          </ul>

          <h4>Special Fields</h4>
          <ul>
            <li><code>data-radio-group</code>, <code>data-radio-option</code>, <code>data-radio-input</code></li>
            <li><code>data-checkbox-group</code>, <code>data-checkbox-option</code>, <code>data-checkbox-input</code></li>
            <li><code>data-table-container</code>, <code>data-table</code>, <code>data-table-row</code>, <code>data-table-cell</code></li>
            <li><code>data-datagrid-container</code>, <code>data-datagrid</code>, <code>data-datagrid-row</code>, <code>data-datagrid-cell</code></li>
            <li><code>data-phone-container</code>, <code>data-phone-country-code</code>, <code>data-phone-number</code></li>
            <li><code>data-daterange-container</code>, <code>data-daterange-from</code>, <code>data-daterange-to</code></li>
            <li><code>data-info-block</code>, <code>data-info-content</code></li>
          </ul>
        </section>
      </article>
    </div>
  }
</div>

<router-outlet />
